[2025-11-09 10:08:05] [INFO] - [Main] config.yml から設定をロードしました。
[2025-11-09 10:08:05] [INFO] - Loaded config:
{
  "num_clients": 5,
  "num_rounds": 20,
  "local_epochs": 2,
  "non_iid_alpha": 0.3,
  "rank": 4,
  "server_lr": 0.1,
  "client_lr": 0.01,
  "shapley_tmc_iterations": 20,
  "eval_interval": 1
}
[2025-11-09 10:08:05] [INFO] - 
[Main] Using device: cuda
[2025-11-09 10:08:05] [INFO] - 
[Main] 共通データセットを準備します...
[2025-11-09 10:08:06] [INFO] - [Data] Non-IIDデータ分割を開始 (Alpha=0.3)...
[2025-11-09 10:08:06] [INFO] - [Data] 5 クライアント分のデータローダーを作成完了。
[2025-11-09 10:08:06] [INFO] - --- [パート1] B-Fixed (ResNet) 版 ---
[2025-11-09 10:08:06] [INFO] - Clients: 5, Rounds: 20, Rank: 4
[2025-11-09 10:08:06] [INFO] - ------------------------------
[2025-11-09 10:08:06] [INFO] - [Model] ResNet-50 (ImageNet-1k) をロード中...
[2025-11-09 10:08:06] [INFO] - [Model] ResNet-50ロード完了。分類ヘッド (Linear 2048->10) をLoRA化 (Rank=4)。
[2025-11-09 10:08:07] [INFO] - [Server] B_server を直交行列 (shape 10x4) で初期化しました。
[2025-11-09 10:08:07] [INFO] - [Server] B-Fixed (ResNet) サーバを初期化しました。
[2025-11-09 10:08:07] [INFO] - [Main] Client LR: 0.01
[2025-11-09 10:08:07] [INFO] - [Main] 5 クライアントの初期化完了。
[2025-11-09 10:08:07] [INFO] - ------------------------------
[2025-11-09 10:08:07] [INFO] - [Main] グローバルテスト精度を 1 ラウンドごとに計算します。
[2025-11-09 10:08:07] [INFO] - 
--- Round 1/20 ---
[2025-11-09 10:08:22] [INFO] -   [Client 0] Local Train (A only): Avg Loss = 1.2818
[2025-11-09 10:08:42] [INFO] -   [Client 1] Local Train (A only): Avg Loss = 1.2567
[2025-11-09 10:09:14] [INFO] -   [Client 2] Local Train (A only): Avg Loss = 1.1874
[2025-11-09 10:09:23] [INFO] -   [Client 3] Local Train (A only): Avg Loss = 1.3231
[2025-11-09 10:09:48] [INFO] -   [Client 4] Local Train (A only): Avg Loss = 1.2881
[2025-11-09 10:09:48] [INFO] -          [Server] B_server は固定されているため、更新をスキップします。
[2025-11-09 10:09:48] [INFO] - 
[Main] Round 1: グローバルテスト精度を計算中...
[2025-11-09 10:09:53] [INFO] - ====== [Main] Round 1 Global Test Accuracy: 56.0200% ======
[2025-11-09 10:09:53] [INFO] - 
--- Round 2/20 ---
[2025-11-09 10:10:07] [INFO] -   [Client 0] Local Train (A only): Avg Loss = 0.9875
[2025-11-09 10:10:25] [INFO] -   [Client 1] Local Train (A only): Avg Loss = 0.9828
[2025-11-09 10:10:57] [INFO] -   [Client 2] Local Train (A only): Avg Loss = 0.9055
[2025-11-09 10:11:07] [INFO] -   [Client 3] Local Train (A only): Avg Loss = 1.0303
[2025-11-09 10:11:31] [INFO] -   [Client 4] Local Train (A only): Avg Loss = 0.9801
[2025-11-09 10:11:31] [INFO] -          [Server] B_server は固定されているため、更新をスキップします。
[2025-11-09 10:11:31] [INFO] - 
[Main] Round 2: グローバルテスト精度を計算中...
[2025-11-09 10:11:36] [INFO] - ====== [Main] Round 2 Global Test Accuracy: 60.7000% ======
[2025-11-09 10:11:36] [INFO] - 
--- Round 3/20 ---
[2025-11-09 10:11:50] [INFO] -   [Client 0] Local Train (A only): Avg Loss = 0.8982
[2025-11-09 10:12:07] [INFO] -   [Client 1] Local Train (A only): Avg Loss = 0.8986
[2025-11-09 10:12:39] [INFO] -   [Client 2] Local Train (A only): Avg Loss = 0.8321
[2025-11-09 10:12:48] [INFO] -   [Client 3] Local Train (A only): Avg Loss = 0.9259
[2025-11-09 10:13:12] [INFO] -   [Client 4] Local Train (A only): Avg Loss = 0.8903
[2025-11-09 10:13:12] [INFO] -          [Server] B_server は固定されているため、更新をスキップします。
[2025-11-09 10:13:12] [INFO] - 
[Main] Round 3: グローバルテスト精度を計算中...
[2025-11-09 10:13:17] [INFO] - ====== [Main] Round 3 Global Test Accuracy: 63.9500% ======
[2025-11-09 10:13:17] [INFO] - 
--- Round 4/20 ---
[2025-11-09 10:13:31] [INFO] -   [Client 0] Local Train (A only): Avg Loss = 0.8444
[2025-11-09 10:13:49] [INFO] -   [Client 1] Local Train (A only): Avg Loss = 0.8500
[2025-11-09 10:14:20] [INFO] -   [Client 2] Local Train (A only): Avg Loss = 0.7931
[2025-11-09 10:14:30] [INFO] -   [Client 3] Local Train (A only): Avg Loss = 0.8648
[2025-11-09 10:14:54] [INFO] -   [Client 4] Local Train (A only): Avg Loss = 0.8269
[2025-11-09 10:14:54] [INFO] -          [Server] B_server は固定されているため、更新をスキップします。
[2025-11-09 10:14:54] [INFO] - 
[Main] Round 4: グローバルテスト精度を計算中...
[2025-11-09 10:14:59] [INFO] - ====== [Main] Round 4 Global Test Accuracy: 65.8700% ======
[2025-11-09 10:14:59] [INFO] - 
--- Round 5/20 ---
[2025-11-09 10:15:12] [INFO] -   [Client 0] Local Train (A only): Avg Loss = 0.8053
[2025-11-09 10:15:30] [INFO] -   [Client 1] Local Train (A only): Avg Loss = 0.8131
[2025-11-09 10:16:02] [INFO] -   [Client 2] Local Train (A only): Avg Loss = 0.7635
[2025-11-09 10:16:11] [INFO] -   [Client 3] Local Train (A only): Avg Loss = 0.8170
[2025-11-09 10:16:35] [INFO] -   [Client 4] Local Train (A only): Avg Loss = 0.7889
[2025-11-09 10:16:35] [INFO] -          [Server] B_server は固定されているため、更新をスキップします。
[2025-11-09 10:16:35] [INFO] - 
[Main] Round 5: グローバルテスト精度を計算中...
[2025-11-09 10:16:39] [INFO] - ====== [Main] Round 5 Global Test Accuracy: 67.5500% ======
[2025-11-09 10:16:39] [INFO] - 
--- Round 6/20 ---
[2025-11-09 10:16:53] [INFO] -   [Client 0] Local Train (A only): Avg Loss = 0.7723
[2025-11-09 10:17:11] [INFO] -   [Client 1] Local Train (A only): Avg Loss = 0.7809
[2025-11-09 10:17:42] [INFO] -   [Client 2] Local Train (A only): Avg Loss = 0.7363
[2025-11-09 10:17:52] [INFO] -   [Client 3] Local Train (A only): Avg Loss = 0.7833
[2025-11-09 10:18:16] [INFO] -   [Client 4] Local Train (A only): Avg Loss = 0.7574
[2025-11-09 10:18:16] [INFO] -          [Server] B_server は固定されているため、更新をスキップします。
[2025-11-09 10:18:16] [INFO] - 
[Main] Round 6: グローバルテスト精度を計算中...
[2025-11-09 10:18:20] [INFO] - ====== [Main] Round 6 Global Test Accuracy: 68.7400% ======
[2025-11-09 10:18:20] [INFO] - 
--- Round 7/20 ---
[2025-11-09 10:18:34] [INFO] -   [Client 0] Local Train (A only): Avg Loss = 0.7502
[2025-11-09 10:18:51] [INFO] -   [Client 1] Local Train (A only): Avg Loss = 0.7580
[2025-11-09 10:19:23] [INFO] -   [Client 2] Local Train (A only): Avg Loss = 0.7222
[2025-11-09 10:19:32] [INFO] -   [Client 3] Local Train (A only): Avg Loss = 0.7559
[2025-11-09 10:19:56] [INFO] -   [Client 4] Local Train (A only): Avg Loss = 0.7351
[2025-11-09 10:19:56] [INFO] -          [Server] B_server は固定されているため、更新をスキップします。
[2025-11-09 10:19:56] [INFO] - 
[Main] Round 7: グローバルテスト精度を計算中...
[2025-11-09 10:20:01] [INFO] - ====== [Main] Round 7 Global Test Accuracy: 70.1700% ======
[2025-11-09 10:20:01] [INFO] - 
--- Round 8/20 ---
[2025-11-09 10:20:15] [INFO] -   [Client 0] Local Train (A only): Avg Loss = 0.7330
[2025-11-09 10:20:32] [INFO] -   [Client 1] Local Train (A only): Avg Loss = 0.7407
[2025-11-09 10:21:04] [INFO] -   [Client 2] Local Train (A only): Avg Loss = 0.7029
[2025-11-09 10:21:13] [INFO] -   [Client 3] Local Train (A only): Avg Loss = 0.7216
[2025-11-09 10:21:37] [INFO] -   [Client 4] Local Train (A only): Avg Loss = 0.7208
[2025-11-09 10:21:37] [INFO] -          [Server] B_server は固定されているため、更新をスキップします。
[2025-11-09 10:21:37] [INFO] - 
[Main] Round 8: グローバルテスト精度を計算中...
[2025-11-09 10:21:42] [INFO] - ====== [Main] Round 8 Global Test Accuracy: 70.8700% ======
[2025-11-09 10:21:42] [INFO] - 
--- Round 9/20 ---
[2025-11-09 10:21:55] [INFO] -   [Client 0] Local Train (A only): Avg Loss = 0.7110
[2025-11-09 10:22:12] [INFO] -   [Client 1] Local Train (A only): Avg Loss = 0.7254
[2025-11-09 10:22:43] [INFO] -   [Client 2] Local Train (A only): Avg Loss = 0.6917
[2025-11-09 10:22:53] [INFO] -   [Client 3] Local Train (A only): Avg Loss = 0.7019
[2025-11-09 10:23:17] [INFO] -   [Client 4] Local Train (A only): Avg Loss = 0.7060
[2025-11-09 10:23:17] [INFO] -          [Server] B_server は固定されているため、更新をスキップします。
[2025-11-09 10:23:17] [INFO] - 
[Main] Round 9: グローバルテスト精度を計算中...
[2025-11-09 10:23:22] [INFO] - ====== [Main] Round 9 Global Test Accuracy: 71.5300% ======
[2025-11-09 10:23:22] [INFO] - 
--- Round 10/20 ---
[2025-11-09 10:23:35] [INFO] -   [Client 0] Local Train (A only): Avg Loss = 0.6987
[2025-11-09 10:23:53] [INFO] -   [Client 1] Local Train (A only): Avg Loss = 0.7115
[2025-11-09 10:24:25] [INFO] -   [Client 2] Local Train (A only): Avg Loss = 0.6833
[2025-11-09 10:24:34] [INFO] -   [Client 3] Local Train (A only): Avg Loss = 0.6886
[2025-11-09 10:24:58] [INFO] -   [Client 4] Local Train (A only): Avg Loss = 0.6935
[2025-11-09 10:24:58] [INFO] -          [Server] B_server は固定されているため、更新をスキップします。
[2025-11-09 10:24:58] [INFO] - 
[Main] Round 10: グローバルテスト精度を計算中...
[2025-11-09 10:25:03] [INFO] - ====== [Main] Round 10 Global Test Accuracy: 72.2900% ======
[2025-11-09 10:25:03] [INFO] - 
--- Round 11/20 ---
[2025-11-09 10:25:16] [INFO] -   [Client 0] Local Train (A only): Avg Loss = 0.6834
[2025-11-09 10:25:34] [INFO] -   [Client 1] Local Train (A only): Avg Loss = 0.6962
[2025-11-09 10:26:04] [INFO] -   [Client 2] Local Train (A only): Avg Loss = 0.6693
[2025-11-09 10:26:13] [INFO] -   [Client 3] Local Train (A only): Avg Loss = 0.6682
[2025-11-09 10:26:38] [INFO] -   [Client 4] Local Train (A only): Avg Loss = 0.6785
[2025-11-09 10:26:38] [INFO] -          [Server] B_server は固定されているため、更新をスキップします。
[2025-11-09 10:26:38] [INFO] - 
[Main] Round 11: グローバルテスト精度を計算中...
[2025-11-09 10:26:42] [INFO] - ====== [Main] Round 11 Global Test Accuracy: 72.6600% ======
[2025-11-09 10:26:42] [INFO] - 
--- Round 12/20 ---
[2025-11-09 10:26:56] [INFO] -   [Client 0] Local Train (A only): Avg Loss = 0.6669
[2025-11-09 10:27:13] [INFO] -   [Client 1] Local Train (A only): Avg Loss = 0.6837
[2025-11-09 10:27:44] [INFO] -   [Client 2] Local Train (A only): Avg Loss = 0.6604
[2025-11-09 10:27:54] [INFO] -   [Client 3] Local Train (A only): Avg Loss = 0.6577
[2025-11-09 10:28:18] [INFO] -   [Client 4] Local Train (A only): Avg Loss = 0.6708
[2025-11-09 10:28:18] [INFO] -          [Server] B_server は固定されているため、更新をスキップします。
[2025-11-09 10:28:18] [INFO] - 
[Main] Round 12: グローバルテスト精度を計算中...
[2025-11-09 10:28:22] [INFO] - ====== [Main] Round 12 Global Test Accuracy: 72.9800% ======
[2025-11-09 10:28:22] [INFO] - 
--- Round 13/20 ---
[2025-11-09 10:28:36] [INFO] -   [Client 0] Local Train (A only): Avg Loss = 0.6569
[2025-11-09 10:28:53] [INFO] -   [Client 1] Local Train (A only): Avg Loss = 0.6697
[2025-11-09 10:29:25] [INFO] -   [Client 2] Local Train (A only): Avg Loss = 0.6503
[2025-11-09 10:29:34] [INFO] -   [Client 3] Local Train (A only): Avg Loss = 0.6375
[2025-11-09 10:29:58] [INFO] -   [Client 4] Local Train (A only): Avg Loss = 0.6613
[2025-11-09 10:29:58] [INFO] -          [Server] B_server は固定されているため、更新をスキップします。
[2025-11-09 10:29:58] [INFO] - 
[Main] Round 13: グローバルテスト精度を計算中...
[2025-11-09 10:30:03] [INFO] - ====== [Main] Round 13 Global Test Accuracy: 73.2200% ======
[2025-11-09 10:30:03] [INFO] - 
--- Round 14/20 ---
[2025-11-09 10:30:17] [INFO] -   [Client 0] Local Train (A only): Avg Loss = 0.6442
[2025-11-09 10:30:34] [INFO] -   [Client 1] Local Train (A only): Avg Loss = 0.6704
[2025-11-09 10:31:05] [INFO] -   [Client 2] Local Train (A only): Avg Loss = 0.6523
[2025-11-09 10:31:15] [INFO] -   [Client 3] Local Train (A only): Avg Loss = 0.6335
[2025-11-09 10:31:39] [INFO] -   [Client 4] Local Train (A only): Avg Loss = 0.6467
[2025-11-09 10:31:39] [INFO] -          [Server] B_server は固定されているため、更新をスキップします。
[2025-11-09 10:31:39] [INFO] - 
[Main] Round 14: グローバルテスト精度を計算中...
[2025-11-09 10:31:43] [INFO] - ====== [Main] Round 14 Global Test Accuracy: 73.5900% ======
[2025-11-09 10:31:43] [INFO] - 
--- Round 15/20 ---
[2025-11-09 10:31:57] [INFO] -   [Client 0] Local Train (A only): Avg Loss = 0.6362
[2025-11-09 10:32:15] [INFO] -   [Client 1] Local Train (A only): Avg Loss = 0.6609
[2025-11-09 10:32:48] [INFO] -   [Client 2] Local Train (A only): Avg Loss = 0.6407
[2025-11-09 10:32:57] [INFO] -   [Client 3] Local Train (A only): Avg Loss = 0.6219
[2025-11-09 10:33:22] [INFO] -   [Client 4] Local Train (A only): Avg Loss = 0.6390
[2025-11-09 10:33:22] [INFO] -          [Server] B_server は固定されているため、更新をスキップします。
[2025-11-09 10:33:22] [INFO] - 
[Main] Round 15: グローバルテスト精度を計算中...
[2025-11-09 10:33:26] [INFO] - ====== [Main] Round 15 Global Test Accuracy: 73.8300% ======
[2025-11-09 10:33:26] [INFO] - 
--- Round 16/20 ---
[2025-11-09 10:33:40] [INFO] -   [Client 0] Local Train (A only): Avg Loss = 0.6395
[2025-11-09 10:33:58] [INFO] -   [Client 1] Local Train (A only): Avg Loss = 0.6501
[2025-11-09 10:34:30] [INFO] -   [Client 2] Local Train (A only): Avg Loss = 0.6340
[2025-11-09 10:34:39] [INFO] -   [Client 3] Local Train (A only): Avg Loss = 0.6062
[2025-11-09 10:35:04] [INFO] -   [Client 4] Local Train (A only): Avg Loss = 0.6315
[2025-11-09 10:35:04] [INFO] -          [Server] B_server は固定されているため、更新をスキップします。
[2025-11-09 10:35:04] [INFO] - 
[Main] Round 16: グローバルテスト精度を計算中...
[2025-11-09 10:35:08] [INFO] - ====== [Main] Round 16 Global Test Accuracy: 74.3000% ======
[2025-11-09 10:35:08] [INFO] - 
--- Round 17/20 ---
[2025-11-09 10:35:22] [INFO] -   [Client 0] Local Train (A only): Avg Loss = 0.6179
[2025-11-09 10:35:40] [INFO] -   [Client 1] Local Train (A only): Avg Loss = 0.6462
[2025-11-09 10:36:12] [INFO] -   [Client 2] Local Train (A only): Avg Loss = 0.6296
[2025-11-09 10:36:22] [INFO] -   [Client 3] Local Train (A only): Avg Loss = 0.6071
[2025-11-09 10:36:46] [INFO] -   [Client 4] Local Train (A only): Avg Loss = 0.6269
[2025-11-09 10:36:46] [INFO] -          [Server] B_server は固定されているため、更新をスキップします。
[2025-11-09 10:36:46] [INFO] - 
[Main] Round 17: グローバルテスト精度を計算中...
[2025-11-09 10:36:51] [INFO] - ====== [Main] Round 17 Global Test Accuracy: 74.3500% ======
[2025-11-09 10:36:51] [INFO] - 
--- Round 18/20 ---
[2025-11-09 10:37:05] [INFO] -   [Client 0] Local Train (A only): Avg Loss = 0.6210
[2025-11-09 10:37:22] [INFO] -   [Client 1] Local Train (A only): Avg Loss = 0.6369
[2025-11-09 10:37:52] [INFO] -   [Client 2] Local Train (A only): Avg Loss = 0.6254
[2025-11-09 10:38:02] [INFO] -   [Client 3] Local Train (A only): Avg Loss = 0.6041
[2025-11-09 10:38:25] [INFO] -   [Client 4] Local Train (A only): Avg Loss = 0.6271
[2025-11-09 10:38:25] [INFO] -          [Server] B_server は固定されているため、更新をスキップします。
[2025-11-09 10:38:25] [INFO] - 
[Main] Round 18: グローバルテスト精度を計算中...
[2025-11-09 10:38:30] [INFO] - ====== [Main] Round 18 Global Test Accuracy: 74.6500% ======
[2025-11-09 10:38:30] [INFO] - 
--- Round 19/20 ---
[2025-11-09 10:38:44] [INFO] -   [Client 0] Local Train (A only): Avg Loss = 0.6164
[2025-11-09 10:39:01] [INFO] -   [Client 1] Local Train (A only): Avg Loss = 0.6254
[2025-11-09 10:39:32] [INFO] -   [Client 2] Local Train (A only): Avg Loss = 0.6191
[2025-11-09 10:39:42] [INFO] -   [Client 3] Local Train (A only): Avg Loss = 0.5831
[2025-11-09 10:40:06] [INFO] -   [Client 4] Local Train (A only): Avg Loss = 0.6145
[2025-11-09 10:40:06] [INFO] -          [Server] B_server は固定されているため、更新をスキップします。
[2025-11-09 10:40:06] [INFO] - 
[Main] Round 19: グローバルテスト精度を計算中...
[2025-11-09 10:40:10] [INFO] - ====== [Main] Round 19 Global Test Accuracy: 75.0300% ======
[2025-11-09 10:40:10] [INFO] - 
--- Round 20/20 ---
[2025-11-09 10:40:24] [INFO] -   [Client 0] Local Train (A only): Avg Loss = 0.5989
[2025-11-09 10:40:42] [INFO] -   [Client 1] Local Train (A only): Avg Loss = 0.6257
[2025-11-09 10:41:13] [INFO] -   [Client 2] Local Train (A only): Avg Loss = 0.6101
[2025-11-09 10:41:23] [INFO] -   [Client 3] Local Train (A only): Avg Loss = 0.5798
[2025-11-09 10:41:47] [INFO] -   [Client 4] Local Train (A only): Avg Loss = 0.6147
[2025-11-09 10:41:47] [INFO] -          [Server] B_server は固定されているため、更新をスキップします。
[2025-11-09 10:41:47] [INFO] - 
[Server] Shapley値 (TMC) の計算を開始...
[2025-11-09 10:41:47] [INFO] -            [Shapley] TMC-Shapley (T=20) 開始...
[2025-11-09 10:41:51] [INFO] -            [Shapley] V(S=[3]) = 48.8900%
[2025-11-09 10:41:56] [INFO] -            [Shapley] V(S=[0, 3]) = 51.2900%
[2025-11-09 10:42:00] [INFO] -            [Shapley] V(S=[0, 3, 4]) = 66.6500%
[2025-11-09 10:42:04] [INFO] -            [Shapley] V(S=[0, 2, 3, 4]) = 74.4400%
[2025-11-09 10:42:09] [INFO] -            [Shapley] V(S=[0, 1, 2, 3, 4]) = 75.2400%
[2025-11-09 10:42:13] [INFO] -            [Shapley] V(S=[0]) = 46.0500%
[2025-11-09 10:42:18] [INFO] -            [Shapley] V(S=[0, 4]) = 69.4500%
[2025-11-09 10:42:22] [INFO] -            [Shapley] V(S=[0, 2, 4]) = 73.8800%
[2025-11-09 10:42:27] [INFO] -            [Shapley] V(S=[0, 2, 3, 4]) = 74.4400%
[2025-11-09 10:42:31] [INFO] -            [Shapley] V(S=[0, 1, 2, 3, 4]) = 75.2400%
[2025-11-09 10:42:35] [INFO] -            [Shapley] V(S=[3]) = 48.8900%
[2025-11-09 10:42:40] [INFO] -            [Shapley] V(S=[0, 3]) = 51.2900%
[2025-11-09 10:42:44] [INFO] -            [Shapley] V(S=[0, 1, 3]) = 61.4200%
[2025-11-09 10:42:49] [INFO] -            [Shapley] V(S=[0, 1, 2, 3]) = 70.8300%
[2025-11-09 10:42:53] [INFO] -            [Shapley] V(S=[0, 1, 2, 3, 4]) = 75.2400%
[2025-11-09 10:42:58] [INFO] -            [Shapley] V(S=[2]) = 60.9100%
[2025-11-09 10:43:02] [INFO] -            [Shapley] V(S=[2, 3]) = 67.7500%
[2025-11-09 10:43:06] [INFO] -            [Shapley] V(S=[0, 2, 3]) = 65.5600%
[2025-11-09 10:43:11] [INFO] -            [Shapley] V(S=[0, 2, 3, 4]) = 74.4400%
[2025-11-09 10:43:15] [INFO] -            [Shapley] V(S=[0, 1, 2, 3, 4]) = 75.2400%
[2025-11-09 10:43:20] [INFO] -            [Shapley] V(S=[1]) = 61.2300%
[2025-11-09 10:43:25] [INFO] -            [Shapley] V(S=[0, 1]) = 58.7600%
[2025-11-09 10:43:29] [INFO] -            [Shapley] V(S=[0, 1, 3]) = 61.4200%
[2025-11-09 10:43:34] [INFO] -            [Shapley] V(S=[0, 1, 2, 3]) = 70.8300%
[2025-11-09 10:43:37] [INFO] -            [Shapley] V(S=[0, 1, 2, 3, 4]) = 75.2400%
[2025-11-09 10:43:42] [INFO] -            [Shapley] V(S=[4]) = 55.4400%
[2025-11-09 10:43:46] [INFO] -            [Shapley] V(S=[3, 4]) = 67.4600%
[2025-11-09 10:43:51] [INFO] -            [Shapley] V(S=[2, 3, 4]) = 70.9500%
[2025-11-09 10:43:55] [INFO] -            [Shapley] V(S=[0, 2, 3, 4]) = 74.4400%
[2025-11-09 10:44:00] [INFO] -            [Shapley] V(S=[0, 1, 2, 3, 4]) = 75.2400%
[2025-11-09 10:44:04] [INFO] -            [Shapley] V(S=[3]) = 48.8900%
[2025-11-09 10:44:08] [INFO] -            [Shapley] V(S=[3, 4]) = 67.4600%
[2025-11-09 10:44:13] [INFO] -            [Shapley] V(S=[1, 3, 4]) = 70.3100%
[2025-11-09 10:44:17] [INFO] -            [Shapley] V(S=[0, 1, 3, 4]) = 70.6200%
[2025-11-09 10:44:22] [INFO] -            [Shapley] V(S=[0, 1, 2, 3, 4]) = 75.2400%
[2025-11-09 10:44:26] [INFO] -            [Shapley] V(S=[4]) = 55.4400%
[2025-11-09 10:44:31] [INFO] -            [Shapley] V(S=[0, 4]) = 69.4500%
[2025-11-09 10:44:35] [INFO] -            [Shapley] V(S=[0, 3, 4]) = 66.6500%
[2025-11-09 10:44:39] [INFO] -            [Shapley] V(S=[0, 2, 3, 4]) = 74.4400%
[2025-11-09 10:44:44] [INFO] -            [Shapley] V(S=[0, 1, 2, 3, 4]) = 75.2400%
[2025-11-09 10:44:48] [INFO] -            [Shapley] V(S=[2]) = 60.9100%
[2025-11-09 10:44:53] [INFO] -            [Shapley] V(S=[0, 2]) = 64.6800%
[2025-11-09 10:44:57] [INFO] -            [Shapley] V(S=[0, 2, 4]) = 73.8800%
[2025-11-09 10:45:02] [INFO] -            [Shapley] V(S=[0, 2, 3, 4]) = 74.4400%
[2025-11-09 10:45:06] [INFO] -            [Shapley] V(S=[0, 1, 2, 3, 4]) = 75.2400%
[2025-11-09 10:45:10] [INFO] -            [Shapley] V(S=[4]) = 55.4400%
[2025-11-09 10:45:15] [INFO] -            [Shapley] V(S=[0, 4]) = 69.4500%
[2025-11-09 10:45:19] [INFO] -            [Shapley] V(S=[0, 1, 4]) = 68.3000%
[2025-11-09 10:45:24] [INFO] -            [Shapley] V(S=[0, 1, 2, 4]) = 72.8100%
[2025-11-09 10:45:28] [INFO] -            [Shapley] V(S=[0, 1, 2, 3, 4]) = 75.2400%
[2025-11-09 10:45:33] [INFO] -            [Shapley] V(S=[3]) = 48.8900%
[2025-11-09 10:45:37] [INFO] -            [Shapley] V(S=[0, 3]) = 51.2900%
[2025-11-09 10:45:42] [INFO] -            [Shapley] V(S=[0, 3, 4]) = 66.6500%
[2025-11-09 10:45:45] [INFO] -            [Shapley] V(S=[0, 2, 3, 4]) = 74.4400%
[2025-11-09 10:45:50] [INFO] -            [Shapley] V(S=[0, 1, 2, 3, 4]) = 75.2400%
[2025-11-09 10:45:55] [INFO] -            [Shapley] V(S=[2]) = 60.9100%
[2025-11-09 10:45:59] [INFO] -            [Shapley] V(S=[2, 4]) = 65.3100%
[2025-11-09 10:46:04] [INFO] -            [Shapley] V(S=[2, 3, 4]) = 70.9500%
[2025-11-09 10:46:08] [INFO] -            [Shapley] V(S=[0, 2, 3, 4]) = 74.4400%
[2025-11-09 10:46:13] [INFO] -            [Shapley] V(S=[0, 1, 2, 3, 4]) = 75.2400%
[2025-11-09 10:46:17] [INFO] -            [Shapley] V(S=[3]) = 48.8900%
[2025-11-09 10:46:21] [INFO] -            [Shapley] V(S=[2, 3]) = 67.7500%
[2025-11-09 10:46:26] [INFO] -            [Shapley] V(S=[1, 2, 3]) = 72.4000%
[2025-11-09 10:46:30] [INFO] -            [Shapley] V(S=[0, 1, 2, 3]) = 70.8300%
[2025-11-09 10:46:35] [INFO] -            [Shapley] V(S=[0, 1, 2, 3, 4]) = 75.2400%
[2025-11-09 10:46:39] [INFO] -            [Shapley] V(S=[1]) = 61.2300%
[2025-11-09 10:46:44] [INFO] -            [Shapley] V(S=[0, 1]) = 58.7600%
[2025-11-09 10:46:48] [INFO] -            [Shapley] V(S=[0, 1, 2]) = 69.8200%
[2025-11-09 10:46:52] [INFO] -            [Shapley] V(S=[0, 1, 2, 3]) = 70.8300%
[2025-11-09 10:46:57] [INFO] -            [Shapley] V(S=[0, 1, 2, 3, 4]) = 75.2400%
[2025-11-09 10:47:02] [INFO] -            [Shapley] V(S=[2]) = 60.9100%
[2025-11-09 10:47:06] [INFO] -            [Shapley] V(S=[1, 2]) = 65.2200%
[2025-11-09 10:47:10] [INFO] -            [Shapley] V(S=[0, 1, 2]) = 69.8200%
[2025-11-09 10:47:15] [INFO] -            [Shapley] V(S=[0, 1, 2, 4]) = 72.8100%
[2025-11-09 10:47:19] [INFO] -            [Shapley] V(S=[0, 1, 2, 3, 4]) = 75.2400%
[2025-11-09 10:47:23] [INFO] -            [Shapley] V(S=[0]) = 46.0500%
[2025-11-09 10:47:28] [INFO] -            [Shapley] V(S=[0, 4]) = 69.4500%
[2025-11-09 10:47:32] [INFO] -            [Shapley] V(S=[0, 3, 4]) = 66.6500%
[2025-11-09 10:47:37] [INFO] -            [Shapley] V(S=[0, 2, 3, 4]) = 74.4400%
[2025-11-09 10:47:41] [INFO] -            [Shapley] V(S=[0, 1, 2, 3, 4]) = 75.2400%
[2025-11-09 10:47:46] [INFO] -            [Shapley] V(S=[4]) = 55.4400%
[2025-11-09 10:47:50] [INFO] -            [Shapley] V(S=[1, 4]) = 62.0300%
[2025-11-09 10:47:54] [INFO] -            [Shapley] V(S=[0, 1, 4]) = 68.3000%
[2025-11-09 10:47:59] [INFO] -            [Shapley] V(S=[0, 1, 3, 4]) = 70.6200%
[2025-11-09 10:48:03] [INFO] -            [Shapley] V(S=[0, 1, 2, 3, 4]) = 75.2400%
[2025-11-09 10:48:08] [INFO] -            [Shapley] V(S=[0]) = 46.0500%
[2025-11-09 10:48:12] [INFO] -            [Shapley] V(S=[0, 1]) = 58.7600%
[2025-11-09 10:48:17] [INFO] -            [Shapley] V(S=[0, 1, 3]) = 61.4200%
[2025-11-09 10:48:21] [INFO] -            [Shapley] V(S=[0, 1, 2, 3]) = 70.8300%
[2025-11-09 10:48:25] [INFO] -            [Shapley] V(S=[0, 1, 2, 3, 4]) = 75.2400%
[2025-11-09 10:48:30] [INFO] -            [Shapley] V(S=[4]) = 55.4400%
[2025-11-09 10:48:34] [INFO] -            [Shapley] V(S=[1, 4]) = 62.0300%
[2025-11-09 10:48:39] [INFO] -            [Shapley] V(S=[1, 2, 4]) = 65.1200%
[2025-11-09 10:48:43] [INFO] -            [Shapley] V(S=[1, 2, 3, 4]) = 73.1300%
[2025-11-09 10:48:48] [INFO] -            [Shapley] V(S=[0, 1, 2, 3, 4]) = 75.2400%
[2025-11-09 10:48:52] [INFO] -            [Shapley] V(S=[1]) = 61.2300%
[2025-11-09 10:48:56] [INFO] -            [Shapley] V(S=[1, 4]) = 62.0300%
[2025-11-09 10:49:01] [INFO] -            [Shapley] V(S=[1, 3, 4]) = 70.3100%
[2025-11-09 10:49:05] [INFO] -            [Shapley] V(S=[1, 2, 3, 4]) = 73.1300%
[2025-11-09 10:49:10] [INFO] -            [Shapley] V(S=[0, 1, 2, 3, 4]) = 75.2400%
[2025-11-09 10:49:10] [INFO] - [Server] Shapley Values (TMC) 算出完了:
[2025-11-09 10:49:10] [INFO] -          Client 0: phi = 9.5410
[2025-11-09 10:49:10] [INFO] -          Client 1: phi = 11.8785
[2025-11-09 10:49:10] [INFO] -          Client 2: phi = 18.0265
[2025-11-09 10:49:10] [INFO] -          Client 3: phi = 14.7135
[2025-11-09 10:49:10] [INFO] -          Client 4: phi = 21.0805
[2025-11-09 10:49:10] [INFO] - 
[Server] (検証1) Gradient-based Proxy Validation を開始...
[2025-11-09 10:49:10] [INFO] - [Proxy Validation] 各クライアントの勾配貢献度 (C_i) を計算:
[2025-11-09 10:49:10] [INFO] -          Client 0: C_i = 5.3378e-02
[2025-11-09 10:49:10] [INFO] -          Client 1: C_i = 1.2124e-01
[2025-11-09 10:49:10] [INFO] -          Client 2: C_i = 2.8546e-01
[2025-11-09 10:49:10] [INFO] -          Client 3: C_i = 7.1097e-02
[2025-11-09 10:49:10] [INFO] -          Client 4: C_i = 9.2935e-01
[2025-11-09 10:49:10] [INFO] - 
========================================
[2025-11-09 10:49:10] [INFO] - --- (検証1) Gradient-based Proxy 検証結果 ---
[2025-11-09 10:49:10] [INFO] - ========================================
[2025-11-09 10:49:10] [INFO] - Client ID  | Phi (Shapley値)    | C_i (Proxyスコア)   
[2025-11-09 10:49:10] [INFO] - ------------------------------------------------
[2025-11-09 10:49:10] [INFO] - 0          | 9.5410            | 5.3378e-02       
[2025-11-09 10:49:10] [INFO] - 1          | 11.8785           | 1.2124e-01       
[2025-11-09 10:49:10] [INFO] - 2          | 18.0265           | 2.8546e-01       
[2025-11-09 10:49:10] [INFO] - 3          | 14.7135           | 7.1097e-02       
[2025-11-09 10:49:10] [INFO] - 4          | 21.0805           | 9.2935e-01       
[2025-11-09 10:49:10] [INFO] - ------------------------------------------------
[2025-11-09 10:49:10] [INFO] - 
[相関分析結果 (Proxy vs Phi)]
[2025-11-09 10:49:10] [INFO] - スピアマン相関係数 (rho) : 0.9000 (p-value: 0.0374)
[2025-11-09 10:49:10] [INFO] - 
[結論] 強い正の相関 (rho > 0.8)。
[2025-11-09 10:49:10] [INFO] - 
[Server] (検証2) Local Accuracy vs Shapley Validation を開始...
[2025-11-09 10:49:10] [INFO] - [LocalAcc Validation] 各クライアントの個別テスト精度 (Local Acc) を計算:
[2025-11-09 10:49:14] [INFO] -            [LocalAcc Eval] Client 0 (A_i only) Test Acc = 46.0500%
[2025-11-09 10:49:19] [INFO] -            [LocalAcc Eval] Client 1 (A_i only) Test Acc = 61.2300%
[2025-11-09 10:49:23] [INFO] -            [LocalAcc Eval] Client 2 (A_i only) Test Acc = 60.9100%
[2025-11-09 10:49:27] [INFO] -            [LocalAcc Eval] Client 3 (A_i only) Test Acc = 48.8900%
[2025-11-09 10:49:32] [INFO] -            [LocalAcc Eval] Client 4 (A_i only) Test Acc = 55.4400%
[2025-11-09 10:49:32] [INFO] - 
========================================
[2025-11-09 10:49:32] [INFO] - --- (検証2) Local Accuracy vs Shapley 検証結果 ---
[2025-11-09 10:49:32] [INFO] - ========================================
[2025-11-09 10:49:32] [INFO] - Client ID  | Phi (Shapley値)    | Local Acc (個別精度) 
[2025-11-09 10:49:32] [INFO] - --------------------------------------------------
[2025-11-09 10:49:32] [INFO] - 0          | 9.5410            | 46.0500          %
[2025-11-09 10:49:32] [INFO] - 1          | 11.8785           | 61.2300          %
[2025-11-09 10:49:32] [INFO] - 2          | 18.0265           | 60.9100          %
[2025-11-09 10:49:32] [INFO] - 3          | 14.7135           | 48.8900          %
[2025-11-09 10:49:32] [INFO] - 4          | 21.0805           | 55.4400          %
[2025-11-09 10:49:32] [INFO] - --------------------------------------------------
[2025-11-09 10:49:32] [INFO] - 
[相関分析結果 (Local Acc vs Phi)]
[2025-11-09 10:49:32] [INFO] - スピアマン相関係数 (rho) : 0.3000 (p-value: 0.6238)
[2025-11-09 10:49:32] [INFO] - 
[結論] 正の相関が見られます。
[2025-11-09 10:49:32] [INFO] - 
[Main] Round 20: グローバルテスト精度を計算中...
[2025-11-09 10:49:36] [INFO] - ====== [Main] Round 20 Global Test Accuracy: 75.2400% ======
[2025-11-09 10:49:36] [INFO] - ------------------------------
[2025-11-09 10:49:36] [INFO] - --- [パート1] 学習完了 --- (総所要時間: 2489.24 秒)
[2025-11-09 10:49:36] [INFO] - 
[Main] すべての処理が完了しました。
